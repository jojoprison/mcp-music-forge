services:
  api:
    volumes:
      - .:/app
    command: ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8033", "--reload"]

  worker:
    volumes:
      - .:/app
    # Hot reload для воркера: при изменении кода нужен restart контейнера
    # (arq --watch требует watchfiles, который не в основных зависимостях)
    command: ["arq", "workers.tasks.WorkerSettings"]

  bot:
    volumes:
      - .:/app
    command: ["python", "bot/main.py"]
